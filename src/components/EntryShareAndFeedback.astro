---
import CopyToClipboard from "@components/CopyToClipboard.astro";
import MastodonShare from "./MastodonShare.astro";

const copyText = `${new URL(Astro.url.pathname, Astro.site)}`;
const blueskyLink = `https://bsky.app/intent/compose?text=${encodeURIComponent(`${Astro.url}`)}`;
const mailtoLink = `mailto:hello@arpit.codes?subject=${encodeURIComponent("Re: " + Astro.url.pathname)}`;
---

<div class="share-feedback repel">
	<p class="text-box-trim">Share:</p>
	<div class="cluster">
		<a class="text-box-trim" href={blueskyLink} target="_blank">Bluesky</a>
		<MastodonShare />
		<CopyToClipboard text={copyText}>
			Copy Link
			<span class="visually-hidden">To This Entry</span>
		</CopyToClipboard>
	</div>
</div>
<div class="repel pb-space-m">
	<p class="text-box-trim">Found this useful?</p>
	<a class="text-box-trim" href={mailtoLink}>Let me know</a>
</div>

<style is:global>
	@layer exceptions {
		.share-feedback {
			padding-block: calc(var(--space-m) - var(--button-padding-block));
		}
	}
</style>
