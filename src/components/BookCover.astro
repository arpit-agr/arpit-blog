---
import type { ImageMetadata } from "astro";
import { Picture } from "astro:assets";

interface Props {
	imagePath: string;
	loading: "eager" | "lazy";
}

const { imagePath, loading } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>(
	"/src/images/book-covers/*.{jpeg,jpg,png,webp}"
);
if (!images[imagePath])
	throw new Error(
		`"${imagePath}" does not exist in glob: "/src/images/book-covers/*.{jpeg,jpg,png,webp}"`
	);
---

<div class="cover">
	<Picture
		src={images[imagePath]()}
		alt=""
		formats={["avif", "webp"]}
		loading={loading}
	/>
</div>
