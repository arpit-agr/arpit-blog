---
import type { ImageMetadata } from "astro";
import { Picture } from "astro:assets";

interface Props {
	imagePath: string;
	loading: "eager" | "lazy";
}

const { imagePath, loading } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>(
	"/src/images/book-covers/*.{jpeg,jpg,png,webp}"
);
if (!images[imagePath])
	throw new Error(
		`"${imagePath}" does not exist in glob: "/src/images/book-covers/*.{jpeg,jpg,png,webp}"`
	);
---

<div class="cover">
	<Picture
		src={images[imagePath]()}
		alt=""
		formats={["avif", "webp"]}
		widths={[300, 600]}
		sizes={`(max-width: 22.9375rem) 100vw, (max-width: 34.75rem) 50vw, (max-width: 47.1875rem) 33vw, (max-width: 60.3125rem) 25vw, 20vw`}
		loading={loading}
	/>
</div>
