---
import type { ImageMetadata } from "astro";
import { Picture } from "astro:assets";

interface Props {
	imagePath: string;
	widths: number[];
	sizes: string;
	priority: boolean;
}

const { imagePath, widths, sizes, priority } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>(
	"/src/images/book-covers/*.{jpeg,jpg,png,webp}"
);
if (!images[imagePath])
	throw new Error(
		`"${imagePath}" does not exist in glob: "/src/images/book-covers/*.{jpeg,jpg,png,webp}"`
	);
---

<Picture
	src={images[imagePath]()}
	alt=""
	formats={["avif", "webp"]}
	{widths}
	{sizes}
	{priority}
/>
