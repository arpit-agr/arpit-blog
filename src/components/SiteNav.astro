---
const navLinks = [
	// {
	// 	label: "Home",
	// 	href: "/",
	// },
	{
		label: "Articles",
		href: "/articles/",
	},
	{
		label: "Notes",
		href: "/notes/",
	},
];

const { pathname } = Astro.url;

function getLinkState(href: string, pathname: string) {
	const isCurrent = href === pathname;
	const isActive = href.length > 1 && pathname.startsWith(href);
	return { isCurrent, isActive };
}
---

<nav class="site-nav">
	<ul role="list">
		{
			navLinks.map((link) => {
				const { isCurrent, isActive } = getLinkState(link.href, pathname);
				return (
					<li>
						<a
							href={link.href}
							aria-current={isCurrent ? "page" : null}
							data-state={isActive ? "active" : null}
						>
							{link.label}
						</a>
					</li>
				);
			})
		}
	</ul>
</nav>

<style is:global>
	@layer blocks {
		.site-nav {
			ul {
				display: flex;
				flex-direction: column;
				gap: var(--space-3xs) var(--space-s);
				flex-wrap: wrap;

				@container (width > 50vi) {
					flex-direction: row;
				}
			}
		}
	}
</style>
