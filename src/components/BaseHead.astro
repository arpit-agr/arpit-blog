---
import { join } from 'node:path';
import { AstroFont } from 'astro-font';
import stylesUrl from '@css/style.css?url';
// import printStylesUrl from "@css/print.css?url";

interface Props {
	pageTitle: string;
	pageDesc?: string;
	ogLocale?: string;
	ogType?: string;
	socialImageURL?: URL;
	socialImageAlt?: string;
	canonicalURL?: URL;
}

const {
	pageTitle,
	pageDesc,
	ogLocale = 'en_IN',
	ogType = 'article',
	socialImageURL = new URL('/images/opengraph.png', Astro.url.origin),
	socialImageAlt = '',
	canonicalURL = new URL(Astro.url.pathname, Astro.site),
} = Astro.props;
---

<!-- https://www.matuzo.at/blog/html-boilerplate/ -->
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>{pageTitle}</title>

<!-- If a browser does not support JS modules, then it is a browser that does not support modern JavaScript, therefore it wonâ€™t get any JavaScript and has to live with the plain old, even if reduced but still usable, HTML-only experience -->
<!-- Processing of the script contents is deferred -->
<!-- Use the js class in CSS, if the styling of a component is different, when JS is active. -->
<script type="module" is:inline>
	document.documentElement.classList.remove('no-js');
	document.documentElement.classList.add('js');
</script>

<AstroFont
	config={[
		{
			name: 'Recursive',
			src: [
				{
					style: 'normal',
					weight: '300 700',
					path: join(process.cwd(), 'public', 'fonts', 'recursive.woff2'),
				},
			],
			preload: false, // manually preloaded after Synchronous CSS
			display: 'swap',
			cssVariable: 'font-mono',
			fallback: 'monospace',
			fallbackName: 'Recursive Fallback',
		},
	]}
/>

<link rel="stylesheet" href={stylesUrl} />
<!-- <link rel="stylesheet" href={printStylesUrl} media="print" /> -->

<link
	as="font"
	crossorigin=""
	rel="preload"
	href="/fonts/recursive.woff2"
	type="font/woff2"
/>

<meta property="og:title" content={pageTitle} />
{!!pageDesc && <meta name="description" content={pageDesc} />}
{!!pageDesc && <meta property="og:description" content={pageDesc} />}
<meta property="og:type" content={ogType} />
<meta property="og:image" content={socialImageURL} />
{!!socialImageAlt && <meta property="og:image:alt" content={socialImageAlt} />}
<meta property="og:url" content={canonicalURL} />
<meta property="og:locale" content={ogLocale} />
<link rel="canonical" href={canonicalURL} />

<!--
	How To Use an Emoji as a Favicon Easily:
	https://css-tricks.com/emoji-as-a-favicon/
-->
{
	import.meta.env.DEV && (
		<link
			rel="icon"
			href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸš¨</text></svg>"
		/>
	)
}

{
	import.meta.env.PROD && (
		<Fragment>
			<link rel="icon" href="/favicon.ico" />
			<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
		</Fragment>
	)
}

<meta name="author" content="Arpit Agrawal" />
<meta name="fediverse:creator" content="arpit@indieweb.social" />
<link rel="me" href="https://indieweb.social/@arpit" />
<link rel="me" href="mailto:hello@arpit.codes" />

<meta name="robots" content="index,follow" />
<meta name="generator" content={Astro.generator} />

<link
	rel="alternate"
	type="application/rss+xml"
	title="Notes RSS"
	href={new URL('/notes/rss.xml', Astro.site)}
/>
<link
	rel="alternate"
	type="application/rss+xml"
	title="Articles RSS"
	href={new URL('/articles/rss.xml', Astro.site)}
/>
<link
	rel="alternate"
	type="application/rss+xml"
	title="Links RSS"
	href={new URL('/links/rss.xml', Astro.site)}
/>
<link
	rel="alternate"
	type="application/rss+xml"
	title="Notes, Articles and Links RSS"
	href={new URL('/rss.xml', Astro.site)}
/>
