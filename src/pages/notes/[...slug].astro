---
import { loadAndFormatCollection } from '@utils/collection';
import type { EnhancedEntry } from '@appTypes/entries';
import { render } from 'astro:content';
import { formatDate } from '@utils/date';
import EntryPage from '@layouts/EntryPage.astro';
import { NOTES_TITLE } from 'src/consts';

export async function getStaticPaths() {
	const posts = await loadAndFormatCollection('notes');
	return posts.map((post) => ({
		params: { slug: post.relativeURL },
		props: post,
	}));
}

type Props = EnhancedEntry<'notes'>;
const entry = Astro.props;
const { Content } = await render(entry);

const noteTitle = `${formatDate(entry.data.pubDate)} - ${NOTES_TITLE}`;
---

<EntryPage pageTitle={noteTitle} entry={entry} Content={Content} />
